<html>
<head>

    <!-- Necessary javascript files for Raphael paint component -->
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
    <script type="text/javascript" src="js/raphael.min.js"></script>
    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="js/raphael.sketchpad.js"></script>
    <!-- END Necessary javascript files for Raphael paint component -->

    <title>Identifying Microbiological Soil Crusts</title>

    <style>

        #editor {
            background-image: url('bsc1.jpg');
            margin-left: auto;
            margin-right: auto;
        }

        .tools div {
			cursor:pointer;
			margin:4px 0 0;
			color:#1D72C2;
			background-color:#D4ECFF;
			border:1px solid #57B6FF;
			text-align:center;
			text-decoration:none;
		}

		.tools div.disabled {
			text-decoration:none;
			color:#666;
			background-color:#eee;
			border:1px solid #ccc;
		}

		.tools div.selected {
			font-weight:bold;
		}

		.tools div._title {
			cursor:default;
			color:#666;
			background-color:transparent;
			border-color:transparent;
		}

    </style>

</head>
<body>

    <!-- Main picture editor -->
    <h2 align="center">Identifying Microbiological Soil Crusts</h2>
    <div id="editor" class="widget" style="height:467px; width:467px"></div>
    <input type="hidden" id="drawingData" name="drawingData" />

    <div class="tools">
        <div class="_title">Color</div>
        <div id="editor_green" class="selected">Green</div>
        <div id="editor_fuschia">Fuschia</div>
    </div>

    <div class="tools">
        <div class="_title">Width</div>
        <div id="editor_thin" class="selected">Thin</div>
        <div id="editor_thick">Thick</div>
    </div>

    <div class="tools">
        <div id="editor_undo" class="disabled">Undo</div>
        <div id="editor_redo" class="disabled">Redo</div>
        <div id="editor_clear" class="disabled">Clear</div>
    </div>

    <div class="clear"></div>

    <div class="tools">
        <div id="editor_draw_erase">Draw</div>
    </div>



    <script type="text/javascript">
	    $(document).ready(function() {
		    var sketchpad = Raphael.sketchpad("editor", {
			    height: 467,
			    width: 467,
			    editing: true	// true is default
		    });
		
		
		    // When the sketchpad changes, update the input field.
		    sketchpad.change(function() {
			    $("#drawingData").val(sketchpad.json());
		    });

		    sketchpad.pen().color("#0f0");

            // This function toggles a button from "enabled" to "disabled"
		    function enable(element, enable) {
			    if (enable) {
				    $(element).removeClass("disabled");
			    } else {
				    $(element).addClass("disabled");
			    }
		    };

		    function select(element1, element2) {
			    $(element1).addClass("selected");
			    $(element2).removeClass("selected");
		    }

		    $("#editor_undo").click(function() {
			    sketchpad.undo();
		    });

		    $("#editor_redo").click(function() {
			    sketchpad.redo();
		    });

		    $("#editor_clear").click(function() {
			    sketchpad.clear();
		    });

		    $("#editor_thin").click(function() {
			    select("#editor_thin", "#editor_thick");
			    sketchpad.pen().width(5);
		    });

		    $("#editor_thick").click(function() {
			    select("#editor_thick", "#editor_thin");
			    sketchpad.pen().width(15);
		    });

		    $("#editor_green").click(function() {
			    select("#editor_green", "#editor_fuschia");
			    sketchpad.pen().color("#0f0");
		    });

		    $("#editor_fuschia").click(function() {
			    select("#editor_fuschia", "#editor_green");
			    sketchpad.pen().color("#ff00ff");
		    });

		    $("#editor_draw_erase").toggle(function() {
			    $(this).text("Erase");
			    sketchpad.editing("erase");
		    }, function() {
			    $(this).text("Draw");
			    sketchpad.editing(true);
		    });

		    function update_actions() {
			    enable("#editor_undo", sketchpad.undoable());
			    enable("#editor_redo", sketchpad.redoable());
			    enable("#editor_clear", sketchpad.strokes().length > 0);
		    }

		    sketchpad.change(update_actions);

		    update_actions();
	    });
    </script>

    <!--

	    <h2>My Sketch Editor</h2>
	
	    <div style="height:260px;" class="widget">
		    <div id="sketchpad_editor"></div>
	    </div>


	    <form action="save.php" method="post">
		    <input type="hidden" name="data" />
		    <input type="submit" value="Save" />
	    </form>
	
	    <script type="text/javascript">
		    var paper = Raphael(10,10,300,300);
		    var sketchpad_editor = Raphael.sketchpad(paper, {
			    width: 400,
			    height: 400,
			    editing: true
		    });
	    </script>
	
    -->


</body>
</html>