<html>
<head>

<!-- Necessary javascript files for Raphael paint component -->
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
<script type="text/javascript" src="raphael.min.js"></script>
<script type="text/javascript" src="json2.js"></script>
<script type="text/javascript" src="raphael.sketchpad.js"></script>
<!-- END Necessary javascript files for Raphael paint component -->

<style>
.editor {background-image: url("test.jpg");}
</style>

</head>
<body>

<div id="editor" class="widget" style="background-image: url(bsc1.jpg); height:467px; width:467px"></div>
<input type="hidden" id="data2" name="data2" />

<script type="text/javascript">
	$(document).ready(function() {
		var sketchpad = Raphael.sketchpad("editor", {
			height: 467,
			width: 467,
			editing: true	// true is default
		});
		
		
		// When the sketchpad changes, update the input field.
		sketchpad.change(function() {
			$("#data2").val(sketchpad.json());
		});

		sketchpad.pen().color("#0f0");

		function enable(element, enable) {
			if (enable) {
				$(element).removeClass("disabled");
			} else {
				$(element).addClass("disabled");
			}
		};

		function select(element1, element2) {
			$(element1).addClass("selected");
			$(element2).removeClass("selected");
		}

		$("#editor_undo").click(function() {
			sketchpad.undo();
		});
		$("#editor_redo").click(function() {
			sketchpad.redo();
		});
		$("#editor_clear").click(function() {
			sketchpad.clear();
		});
		$("#editor_animate").click(function() {
			sketchpad.animate();
		});

		$("#editor_thin").click(function() {
			select("#editor_thin", "#editor_thick");
			sketchpad.pen().width(5);
		});
		$("#editor_thick").click(function() {
			select("#editor_thick", "#editor_thin");
			sketchpad.pen().width(15);
		});
		$("#editor_solid").click(function() {
			select("#editor_solid", "#editor_fuzzy");
			sketchpad.pen().opacity(1);
		});
		$("#editor_fuzzy").click(function() {
			select("#editor_fuzzy", "#editor_solid");
			sketchpad.pen().opacity(0.3);
		});
		$("#editor_black").click(function() {
			select("#editor_black", "#editor_red");
			sketchpad.pen().color("#000");
		});
		$("#editor_red").click(function() {
			select("#editor_red", "#editor_black");
			sketchpad.pen().color("#f00");
		});
		$("#editor_draw_erase").toggle(function() {
			$(this).text("Erase");
			sketchpad.editing("erase");
		}, function() {
			$(this).text("Draw");
			sketchpad.editing(true);
		});

		function update_actions() {
			enable("#editor_undo", sketchpad.undoable());
			enable("#editor_redo", sketchpad.redoable());
			enable("#editor_clear", sketchpad.strokes().length > 0);
		}

		sketchpad.change(update_actions);

		update_actions();
	});
</script>

<!--

	<h2>My Sketch Editor</h2>
	
	<div style="height:260px;" class="widget">
		<div id="sketchpad_editor"></div>
	</div>


	<form action="save.php" method="post">
		<input type="hidden" name="data" />
		<input type="submit" value="Save" />
	</form>
	
	<script type="text/javascript">
		var paper = Raphael(10,10,300,300);
		var sketchpad_editor = Raphael.sketchpad(paper, {
			width: 400,
			height: 400,
			editing: true
		});
	</script>
	
-->


</body>
</html>